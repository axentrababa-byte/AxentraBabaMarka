<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AxentraStore VIP</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:Poppins;background:#0f0f0f;color:white;overflow-x:hidden}
header{text-align:center;padding:40px;background:linear-gradient(45deg,#ff0000,#000)}
.container{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:30px}
.card{background:#1a1a1a;border-radius:15px;padding:20px;text-align:center;transition:.3s}
.card:hover{transform:scale(1.05)}
.card img{width:100%;border-radius:10px}
button{margin-top:10px;background:#ff0000;border:none;padding:10px;border-radius:8px;color:white;cursor:pointer}
button:hover{background:white;color:#ff0000}
.admin{display:none;background:#111;padding:20px;margin:20px;border-radius:15px}
.progress{color:#00ff99;font-size:14px}
.topbar{display:flex;justify-content:space-between;padding:10px 20px;background:#111}
.search{padding:8px;border-radius:8px;border:none}
.popup{position:fixed;bottom:20px;left:20px;background:#111;padding:15px;border-radius:10px;display:none}
.stats{padding:20px;text-align:center;background:#111}
</style>
</head>
<body>

<div class="topbar">
<div>üë• Canlƒ±: <span id="liveUsers">0</span></div>
<input type="text" class="search" placeholder="√úr√ºn ara..." onkeyup="searchProduct(this.value)">
<div onclick="login()" style="cursor:pointer">üîê Admin</div>
</div>

<header>
<h1>AXENTRA STORE VIP</h1>
<p>Premium Dijital √úr√ºn Platformu</p>
</header>

<div class="stats">
Toplam Satƒ±≈ü: <span id="totalSales">0</span> |
Toplam √úr√ºn: <span id="totalProducts">0</span>
</div>

<div class="container" id="productList"></div>

<div class="admin" id="adminPanel">
<h3>√úr√ºn Ekle</h3>
<input type="text" id="name" placeholder="√úr√ºn Adƒ±"><br><br>
<input type="text" id="price" placeholder="Fiyat"><br><br>
<input type="file" id="imageFile"><br>
<div class="progress" id="uploadProgress"></div><br>
<button onclick="addProduct()">Ekle</button>
</div>

<div class="popup" id="fakeBuy"></div>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>

<script>
const ADMIN_PASSWORD="Axentra2026!";
const telegramLink="https://t.me/AxentraBio";
let isAdmin=false;

firebase.initializeApp({
apiKey:"AIzaSyDBL2_jF-eKDTR-5hV5I2eO1f43lEH8K6E",
authDomain:"axentrastore-19480.firebaseapp.com",
projectId:"axentrastore-19480",
storageBucket:"axentrastore-19480.firebasestorage.app",
messagingSenderId:"119744736021",
appId:"1:119744736021:web:7698089459bc06c409171c"
});

const db=firebase.firestore();
const storage=firebase.storage();
const productList=document.getElementById("productList");

function login(){
let pass=prompt("Admin ≈ûifresi:");
if(pass===ADMIN_PASSWORD){
isAdmin=true;
document.getElementById("adminPanel").style.display="block";
alert("Giri≈ü ba≈üarƒ±lƒ±");
}
}

function addProduct(){
if(!isAdmin)return alert("Admin gerekli");
let name=document.getElementById("name").value;
let price=document.getElementById("price").value;
let file=document.getElementById("imageFile").files[0];
let progress=document.getElementById("uploadProgress");
if(!name||!price||!file)return alert("Bo≈ü bƒ±rakma");

let ref=storage.ref("products/"+Date.now()+"_"+file.name);
let task=ref.put(file);

task.on("state_changed",
snap=>{
let percent=(snap.bytesTransferred/snap.totalBytes)*100;
progress.innerText="Y√ºkleniyor: "+percent.toFixed(0)+"%";
},
err=>alert("Hata"),
()=>{
task.snapshot.ref.getDownloadURL().then(url=>{
db.collection("products").add({name,price,image:url,sales:0,stock:Math.floor(Math.random()*20)+5});
progress.innerText="Tamamlandƒ±!";
});
});
}

db.collection("products").onSnapshot(snap=>{
productList.innerHTML="";
let totalSales=0;
document.getElementById("totalProducts").innerText=snap.size;
snap.forEach(doc=>{
let d=doc.data();
totalSales+=d.sales;
let card=document.createElement("div");
card.className="card";
card.innerHTML=`
<img src="${d.image}">
<h3>${d.name}</h3>
<p>${d.price} ‚Ç∫</p>
<p>Stok: ${d.stock}</p>
<p>Satƒ±≈ü: ${d.sales}</p>
<button onclick="buy('${doc.id}','${d.name}',${d.sales},${d.stock})">Satƒ±n Al</button>
${isAdmin?`<button onclick="del('${doc.id}')">Sil</button>`:""}
`;
productList.appendChild(card);
});
document.getElementById("totalSales").innerText=totalSales;
});

function buy(id,name,sales,stock){
if(stock<=0)return alert("Stok bitti");
db.collection("products").doc(id).update({sales:sales+1,stock:stock-1});
window.location.href=telegramLink+"?start="+encodeURIComponent(name);
}

function del(id){
if(!isAdmin)return;
db.collection("products").doc(id).delete();
}

function searchProduct(text){
let cards=document.querySelectorAll(".card");
cards.forEach(c=>{
c.style.display=c.innerText.toLowerCase().includes(text.toLowerCase())?"block":"none";
});
}

setInterval(()=>{
document.getElementById("liveUsers").innerText=Math.floor(Math.random()*50)+10;
},3000);

setInterval(()=>{
let popup=document.getElementById("fakeBuy");
let names=["Ahmet","Mehmet","Kerem","Ali","Hakan","Emre"];
let randomName=names[Math.floor(Math.random()*names.length)];
popup.innerText=randomName+" bir √ºr√ºn satƒ±n aldƒ±!";
popup.style.display="block";
setTimeout(()=>popup.style.display="none",3000);
},8000);
</script>

</body>
</html>
